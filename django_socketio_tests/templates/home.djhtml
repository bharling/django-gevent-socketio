{% extends 'base.djhtml' %}
{% load gevent_socketio %}
{% block head_scripts %}
	{% socketio_js %}
{% endblock %}
{% block styles %}
	<style type="text/css">
		.pushdown {
			margin-top:100px;
		}
		
		.padded {
			padding:20px;
		}
		
		body {
			background:#fafafa;
		}
	</style>
{% endblock %}
{% block content %}
	<div class="container">
		<div class="row">
			<div class="col-sm-6 col-sm-offset-3">
				<div class="panel pushdown padded">
					<h2>Hello</h2>
					<p>Welcome to the django gevent socketio test page</p>
					<p>Click yonder button.</p>
					<button class="btn btn-info" id="test-btn">Have a little test</button>
					<p>&nbsp;</p>
					<div class="result well hidden">
						
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block body_scripts %}
	<script type="text/javascript">
		var socket = io.connect('/gevent_socketio_isworking');
		
		socket.on('echo', function (message) {
			$('.result').text("Got from server: " + message.message).removeClass('hidden');
		});
		
		$(document).ready(function(){
			$('#test-btn').on('click', function () {
				socket.emit('echo', 'Some test message');
			});
		});
	</script>
{% endblock %}
